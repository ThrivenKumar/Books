{"version":3,"sources":["cart.js","Error.js","Header.js","icons8-shopping-cart-64.png","ReturnBooks.js","displaybooks.js","useFetch.js","Homepage.js","index.js"],"names":["Cart","useContext","Share","cartItems","removeData","getData","console","log","length","style","textAlign","className","map","book","title","authors","price","onClick","bookID","fontWeight","Error","to","Header","signIn","user","count","bool","src","image","alt","displayName","ReturnBooks","data","sendData","info","Box","useState","showButton","setShowButton","onMouseEnter","onMouseLeave","Search","bookslist","url","loading","setLoading","setBookList","getBooks","useCallback","a","fetch","response","json","products","useEffect","useFetch","books","booli","result","setResult","ref","useRef","name","onSubmit","e","preventDefault","current","value","newlist","filter","toString","toLowerCase","includes","id","type","placeholder","firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","AuthenticationProvider","auth","GoogleAuthProvider","React","createContext","Homepage","setCartItems","email","userID","setUser","Provider","signInWithPopup","then","photoURL","uid","catch","error","items","database","set","alert","on","snapshot","exists","val","Object","values","err","child","remove","exact","path","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.5c5d568c.chunk.js","sourcesContent":["import { getDefaultNormalizer } from \"@testing-library/dom\";\nimport React, { useContext } from \"react\";\nimport { Share } from \"./Homepage\";\nconst Cart = () => {\n  const { cartItems, removeData, getData } = useContext(Share);\n  console.log(cartItems);\n  return (\n    <>\n      {cartItems.length ? (\n        <>\n          <p style={{ textAlign: \"center\" }}>\n            {cartItems.length} items in cart\n          </p>\n          <div className=\"booklist\">\n            {cartItems.map((book) => {\n              return (\n                <div className=\"book\">\n                  <div className=\"booktitle\">\n                    <h3>{book.title}</h3>\n                  </div>\n                  <div className=\"author\">\n                    <h4 className=\"author\">{book.authors}</h4>\n                  </div>\n                  <div className=\"priceandbutton\">\n                    <h4 className=\"price\">Price : $ {book.price}</h4>\n                    <button\n                      className=\"addtocart\"\n                      onClick={() => {\n                        removeData(book.bookID);\n                        getData();\n                      }}\n                    >\n                      + Cart\n                    </button>\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n        </>\n      ) : (\n        <h3 style={{ textAlign: \"center\", fontWeight: \"lighter\" }}>\n          No Items in cart\n        </h3>\n      )}\n    </>\n  );\n};\nexport default Cart;\n","import { Link } from \"react-router-dom\";\nconst Error = () => {\n  return (\n    <>\n      <h1>Error </h1>\n      <h1>No Page found</h1>\n      <Link to=\"/\">Home</Link>\n    </>\n  );\n};\nexport default Error;\n","import cart from \"./icons8-shopping-cart-64.png\";\nimport { Link } from \"react-router-dom\";\nimport { useContext } from \"react\";\nimport { Share } from \"./Homepage\";\nfunction Header() {\n  const { signIn, user, getData } = useContext(Share);\n  console.count(\"render\");\n  return (\n    <>\n      <div className=\"header\">\n        <Link className=\"title\" to=\"/\">\n          <div>\n            <h1>Books</h1>\n          </div>\n        </Link>\n        {user.bool ? (\n          <img className=\"userImage\" src={user.image} alt={user.displayName} />\n        ) : (\n          <button className=\"cartbutton\" onClick={signIn}>\n            SignIn\n          </button>\n        )}\n        <Link to=\"/cart\" className=\"cartbutton\" onClick={() => getData()}>\n          <div>\n            <img className=\"cart\" src={cart} alt=\"cart\" />\n          </div>\n        </Link>\n      </div>\n    </>\n  );\n}\n\nexport default Header;\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABmJLR0QA/wD/AP+gvaeTAAACz0lEQVR4nO2av2sUQRTHPxcSQaKVgoJdRFFsBAuNaGGjsTFFFGws/AcsLAx2VoJg8B8wdlqojY1a2AlCgmIRq+APkkhEjY2NiejF4lb3Odnb252d2d03tx8YmJ0b5r15+33v5riBhoaGhj6mZTzvBcaBAWO8DTwC5stwqkreAetd2tsK/fKG+abT2O3NiwoxU2APcB4YFmOTKfPVk2VD6znnq2Iw5/zJ3lNqxVfgCfCpyCLdiqKW9hO4RgH1Vr0BV+160uby1oAbGebXhRYwChyPnn8BB7A4y8goamMAeErs/5WkCSHTBh6L513mhNADAHBQ9K2+DTSnwBDwjdj/IzaLaA7AaWLfF0ko+qGnwDnRv4/lS9SqAFP+h20X0hqAMXrIH8JOASn/BxR4gRoVMASsULD6/0VjADLJH8JNAWfyB30KcCp/0BeAU8T+LtHjF2+IKeBU/qBLAYPAF2J/R10sqikAJ8khfwgvBZzLH/QowIv8QU8AcssfwkoBKf+HOHxhGhRgyv+oy8U1BEDK/yOOla0hAM+IfbzlevG6B+AisX9tYL9rA3UNwGbgKvCb2L/pvIsU/Xu825UanwwD++j85bVTjM8Bx4Dvrg2mKSDtSk2Z7QWww+WmJXUOwCJwifz3HP5RNAWSrtT45gfwGXgNvKRTA6zp+ysyWYqXjPAmX45URZYALIn+GV+OVEUWSU8Bl6P+GnCXcm6MLke22iXYSmU7sEA1Vf6C781lSYEV4AQw69mXJLyfPvNU9Rad09chPB46BG+Ae9QgBRpCxjYFAF4Bz3Gbp2XYsGKEThE0q/Rs9JkWG1b0+hpciObU3YY1U8KRVeB21FbF+E0FNqz5IJyYEONnxfh7BTasWRNObBHjW/n/rdXdRiJZToLLoj/WpS/n2FCGDWvM/JwG7uC3BviwYU2WCr1NgY1CjAAzbHRsBrfnAN82NtD3J8E/T4H499yPv2AAAAAASUVORK5CYII=\"","import React from \"react\";\nimport { useState, useContext } from \"react\";\nimport { Share } from \"./Homepage\";\nconst ReturnBooks = ({ data }) => {\n  const { sendData } = useContext(Share);\n  return (\n    <div className=\"booklist\">\n      {data.map((info) => {\n        return (\n          <>\n            <Box info={info} sendData={sendData} key={info.bookID} />\n          </>\n        );\n      })}\n    </div>\n  );\n};\nexport default ReturnBooks;\n\nconst Box = ({ info, sendData }) => {\n  const { title, authors, price } = info;\n  const [showButton, setShowButton] = useState(false);\n  return (\n    <div\n      className=\"book\"\n      key={info.bookID}\n      onMouseEnter={() => {\n        setShowButton(true);\n      }}\n      onMouseLeave={() => setShowButton(false)}\n    >\n      <div className=\"booktitle\">\n        <h3>{title}</h3>\n      </div>\n      <div className=\"author\">\n        <h4 className=\"author\">{authors}</h4>\n      </div>\n      <div className=\"priceandbutton\">\n        <h4 className=\"price\">Price : $ {price}</h4>\n        {showButton && (\n          <button className=\"addtocart\" onClick={() => sendData(info)}>\n            + Cart\n          </button>\n        )}\n      </div>\n    </div>\n  );\n};\n","import React, { useState, useRef } from \"react\";\nimport { useFetch } from \"./useFetch\";\nimport ReturnBooks from \"./ReturnBooks.js\";\nconst url =\n  \"https://s3-ap-southeast-1.amazonaws.com/he-public-data/books8f8fe52.json\";\nfunction Search() {\n  const { bookslist } = useFetch(url);\n  const defaultResult = {\n    books: [],\n    booli: true,\n  };\n  const [result, setResult] = useState(defaultResult);\n  const ref = useRef(null);\n\n  //event handler\n  const func = (e) => {\n    e.preventDefault();\n    if (ref.current.value) {\n      var newlist = [];\n      newlist = bookslist.filter(\n        (info) =>\n          info.title\n            .toString()\n            .toLowerCase()\n            .includes(ref.current.value.toLowerCase()) && info.bookID !== 15321\n      );\n      if (newlist.length > 0) {\n        setResult({ books: newlist, booli: true });\n      } else {\n        setResult({ books: [], booli: false });\n      }\n    } else {\n      setResult({ books: [], booli: true });\n    }\n  };\n  const { books, booli } = result;\n  return (\n    <>\n      <div className=\"search\">\n        <form name=\"search\" onSubmit={func}>\n          <input\n            id=\"searchvalue\"\n            type=\"text\"\n            placeholder=\"Enter book name\"\n            ref={ref}\n          ></input>\n        </form>\n      </div>\n      {books.length ? (\n        <div className=\"count\">\n          <h4>{books.length} results found</h4>\n        </div>\n      ) : (\n        <p></p>\n      )}\n      {booli ? <ReturnBooks data={books} /> : <h2>No Results found!</h2>}\n    </>\n  );\n}\nexport default Search;\n","import { useState, useEffect, useCallback } from \"react\";\n\nexport const useFetch = (url) => {\n  const [loading, setLoading] = useState(true);\n  const [bookslist, setBookList] = useState([]);\n  const getBooks = useCallback(async () => {\n    const response = await fetch(url);\n    const products = await response.json();\n    setBookList(products);\n    setLoading(false);\n  }, [url]);\n  useEffect(() => {\n    getBooks();\n  }, [url, getBooks]);\n  return { loading, bookslist };\n};\n","import { BrowserRouter as Router, Route, Switch } from \"react-router-dom\";\nimport React, { useState } from \"react\";\nimport Cart from \"./cart.js\";\nimport Error from \"./Error\";\nimport Header from \"./Header\";\nimport Search from \"./displaybooks.js\";\nimport firebase from \"firebase/app\";\nimport \"firebase/auth\";\nimport \"firebase/database\";\n//Firebase Config code\nvar firebaseConfig = {\n  apiKey: \"AIzaSyDJFp2qll_RZlu6RhNVLS7Tepu9KENkuz0\",\n  authDomain: \"book-search-2c198.firebaseapp.com\",\n  databaseURL: \"https://book-search-2c198-default-rtdb.firebaseio.com\",\n  projectId: \"book-search-2c198\",\n  storageBucket: \"book-search-2c198.appspot.com\",\n  messagingSenderId: \"831675918202\",\n  appId: \"1:831675918202:web:f65daa4016370212abd8c3\",\n  measurementId: \"G-LLCDVTMEXD\",\n};\nfirebase.initializeApp(firebaseConfig);\nvar AuthenticationProvider = new firebase.auth.GoogleAuthProvider();\nexport const Share = React.createContext();\n\n//Main Function\nconst Homepage = () => {\n  const [cartItems, setCartItems] = useState([]);\n  const [user, setUser] = useState({\n    name: \"\",\n    email: \"\",\n    image: \"\",\n    bool: false,\n    userID: \"\",\n  });\n  //code for sign In\n  const signIn = () => {\n    firebase\n      .auth()\n      .signInWithPopup(AuthenticationProvider)\n      .then((result) => {\n        console.log(result.user);\n        setUser({\n          name: result.user.displayName,\n          image: result.user.photoURL,\n          email: result.user.email,\n          userID: result.user.uid,\n          bool: true,\n        });\n        return [user.bool, user.image];\n      })\n      .catch((error) => {\n        /*// Handle Errors here.\n        var errorCode = error.code;\n        var errorMessage = error.message;\n        // The email of the user's account used.\n        var email = error.email;\n        // The firebase.auth.AuthCredential type that was used.\n        var credential = error.credential;*/\n      });\n  };\n\n  //Send data to cart\n  const sendData = (items) => {\n    if (user.bool) {\n      firebase\n        .database()\n        .ref(\"users/\" + user.userID + \"/itemsInCart/\" + items.bookID.toString())\n        .set(items);\n    } else {\n      alert(\"Login to add items to cart\");\n    }\n  };\n\n  //Remove data from Database\n  const removeData = (items) => {\n    if (user.bool) {\n      firebase\n        .database()\n        .ref(\"users/\" + user.userID + \"/itemsInCart/\")\n        .child(items)\n        .remove();\n    }\n  };\n\n  //Get data from Database\n  const getData = () => {\n    console.log(\"hello\");\n    if (user.bool) {\n      var itemsincart = firebase\n        .database()\n        .ref(\"users/\" + user.userID + \"/itemsInCart\");\n      itemsincart.on(\n        \"value\",\n        (snapshot) => {\n          if (snapshot.exists()) {\n            var items = snapshot.val();\n            setCartItems(Object.values(items));\n          } else {\n            setCartItems([]);\n          }\n        },\n        (err) => {\n          console.log(err);\n        }\n      );\n    }\n  };\n  return (\n    <Share.Provider\n      value={{ user, signIn, sendData, cartItems, getData, removeData }}\n    >\n      <Router>\n        <Header />\n        <Switch>\n          <Route exact path=\"/\">\n            <Search />\n          </Route>\n          <Route exact path=\"/cart\">\n            <Cart />\n          </Route>\n          <Route path=\"*\">\n            <Error />\n          </Route>\n        </Switch>\n      </Router>\n    </Share.Provider>\n  );\n};\nexport default Homepage;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport Homepage from \"./Homepage\";\nReactDOM.render(\n  <React.StrictMode>\n    <Homepage />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n"],"sourceRoot":""}