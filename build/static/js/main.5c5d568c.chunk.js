(this.webpackJsonpbooks=this.webpackJsonpbooks||[]).push([[0],{146:function(e,t,s){},451:function(e,t,s){"use strict";s.r(t);var c=s(2),a=s(3),n=s.n(a),r=s(136),o=s.n(r),i=(s(146),s(22)),l=s(34),b=s(6),j=(s(147),function(){var e=Object(a.useContext)(p),t=e.cartItems,s=e.removeData,n=e.getData;return console.log(t),Object(c.jsx)(c.Fragment,{children:t.length?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)("p",{style:{textAlign:"center"},children:[t.length," items in cart"]}),Object(c.jsx)("div",{className:"booklist",children:t.map((function(e){return Object(c.jsxs)("div",{className:"book",children:[Object(c.jsx)("div",{className:"booktitle",children:Object(c.jsx)("h3",{children:e.title})}),Object(c.jsx)("div",{className:"author",children:Object(c.jsx)("h4",{className:"author",children:e.authors})}),Object(c.jsxs)("div",{className:"priceandbutton",children:[Object(c.jsxs)("h4",{className:"price",children:["Price : $ ",e.price]}),Object(c.jsx)("button",{className:"addtocart",onClick:function(){s(e.bookID),n()},children:"+ Cart"})]})]})}))})]}):Object(c.jsx)("h3",{style:{textAlign:"center",fontWeight:"lighter"},children:"No Items in cart"})})}),u=function(){return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("h1",{children:"Error "}),Object(c.jsx)("h1",{children:"No Page found"}),Object(c.jsx)(l.b,{to:"/",children:"Home"})]})};var h=function(){var e=Object(a.useContext)(p),t=e.signIn,s=e.user,n=e.getData;return console.count("render"),Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)("div",{className:"header",children:[Object(c.jsx)(l.b,{className:"title",to:"/",children:Object(c.jsx)("div",{children:Object(c.jsx)("h1",{children:"Books"})})}),s.bool?Object(c.jsx)("img",{className:"userImage",src:s.image,alt:s.displayName}):Object(c.jsx)("button",{className:"cartbutton",onClick:t,children:"SignIn"}),Object(c.jsx)(l.b,{to:"/cart",className:"cartbutton",onClick:function(){return n()},children:Object(c.jsx)("div",{children:Object(c.jsx)("img",{className:"cart",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABmJLR0QA/wD/AP+gvaeTAAACz0lEQVR4nO2av2sUQRTHPxcSQaKVgoJdRFFsBAuNaGGjsTFFFGws/AcsLAx2VoJg8B8wdlqojY1a2AlCgmIRq+APkkhEjY2NiejF4lb3Odnb252d2d03tx8YmJ0b5r15+33v5riBhoaGhj6mZTzvBcaBAWO8DTwC5stwqkreAetd2tsK/fKG+abT2O3NiwoxU2APcB4YFmOTKfPVk2VD6znnq2Iw5/zJ3lNqxVfgCfCpyCLdiqKW9hO4RgH1Vr0BV+160uby1oAbGebXhRYwChyPnn8BB7A4y8goamMAeErs/5WkCSHTBh6L513mhNADAHBQ9K2+DTSnwBDwjdj/IzaLaA7AaWLfF0ko+qGnwDnRv4/lS9SqAFP+h20X0hqAMXrIH8JOASn/BxR4gRoVMASsULD6/0VjADLJH8JNAWfyB30KcCp/0BeAU8T+LtHjF2+IKeBU/qBLAYPAF2J/R10sqikAJ8khfwgvBZzLH/QowIv8QU8AcssfwkoBKf+HOHxhGhRgyv+oy8U1BEDK/yOOla0hAM+IfbzlevG6B+AisX9tYL9rA3UNwGbgKvCb2L/pvIsU/Xu825UanwwD++j85bVTjM8Bx4Dvrg2mKSDtSk2Z7QWww+WmJXUOwCJwifz3HP5RNAWSrtT45gfwGXgNvKRTA6zp+ysyWYqXjPAmX45URZYALIn+GV+OVEUWSU8Bl6P+GnCXcm6MLke22iXYSmU7sEA1Vf6C781lSYEV4AQw69mXJLyfPvNU9Rad09chPB46BG+Ae9QgBRpCxjYFAF4Bz3Gbp2XYsGKEThE0q/Rs9JkWG1b0+hpciObU3YY1U8KRVeB21FbF+E0FNqz5IJyYEONnxfh7BTasWRNObBHjW/n/rdXdRiJZToLLoj/WpS/n2FCGDWvM/JwG7uC3BviwYU2WCr1NgY1CjAAzbHRsBrfnAN82NtD3J8E/T4H499yPv2AAAAAASUVORK5CYII=",alt:"cart"})})})]})})},d=s(88),O=s.n(d),m=s(139),x=function(e){var t=e.data,s=Object(a.useContext)(p).sendData;return Object(c.jsx)("div",{className:"booklist",children:t.map((function(e){return Object(c.jsx)(c.Fragment,{children:Object(c.jsx)(A,{info:e,sendData:s},e.bookID)})}))})},A=function(e){var t=e.info,s=e.sendData,n=t.title,r=t.authors,o=t.price,l=Object(a.useState)(!1),b=Object(i.a)(l,2),j=b[0],u=b[1];return Object(c.jsxs)("div",{className:"book",onMouseEnter:function(){u(!0)},onMouseLeave:function(){return u(!1)},children:[Object(c.jsx)("div",{className:"booktitle",children:Object(c.jsx)("h3",{children:n})}),Object(c.jsx)("div",{className:"author",children:Object(c.jsx)("h4",{className:"author",children:r})}),Object(c.jsxs)("div",{className:"priceandbutton",children:[Object(c.jsxs)("h4",{className:"price",children:["Price : $ ",o]}),j&&Object(c.jsx)("button",{className:"addtocart",onClick:function(){return s(t)},children:"+ Cart"})]})]},t.bookID)};var f=function(){var e=function(e){var t=Object(a.useState)(!0),s=Object(i.a)(t,2),c=s[0],n=s[1],r=Object(a.useState)([]),o=Object(i.a)(r,2),l=o[0],b=o[1],j=Object(a.useCallback)(Object(m.a)(O.a.mark((function t(){var s,c;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e);case 2:return s=t.sent,t.next=5,s.json();case 5:c=t.sent,b(c),n(!1);case 8:case"end":return t.stop()}}),t)}))),[e]);return Object(a.useEffect)((function(){j()}),[e,j]),{loading:c,bookslist:l}}("https://s3-ap-southeast-1.amazonaws.com/he-public-data/books8f8fe52.json").bookslist,t=Object(a.useState)({books:[],booli:!0}),s=Object(i.a)(t,2),n=s[0],r=s[1],o=Object(a.useRef)(null),l=n.books,b=n.booli;return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("div",{className:"search",children:Object(c.jsx)("form",{name:"search",onSubmit:function(t){if(t.preventDefault(),o.current.value){var s;(s=e.filter((function(e){return e.title.toString().toLowerCase().includes(o.current.value.toLowerCase())&&15321!==e.bookID}))).length>0?r({books:s,booli:!0}):r({books:[],booli:!1})}else r({books:[],booli:!0})},children:Object(c.jsx)("input",{id:"searchvalue",type:"text",placeholder:"Enter book name",ref:o})})}),l.length?Object(c.jsx)("div",{className:"count",children:Object(c.jsxs)("h4",{children:[l.length," results found"]})}):Object(c.jsx)("p",{}),b?Object(c.jsx)(x,{data:l}):Object(c.jsx)("h2",{children:"No Results found!"})]})},g=s(38);s(447),s(449);g.a.initializeApp({apiKey:"AIzaSyDJFp2qll_RZlu6RhNVLS7Tepu9KENkuz0",authDomain:"book-search-2c198.firebaseapp.com",databaseURL:"https://book-search-2c198-default-rtdb.firebaseio.com",projectId:"book-search-2c198",storageBucket:"book-search-2c198.appspot.com",messagingSenderId:"831675918202",appId:"1:831675918202:web:f65daa4016370212abd8c3",measurementId:"G-LLCDVTMEXD"});var v=new g.a.auth.GoogleAuthProvider,p=n.a.createContext(),k=function(){var e=Object(a.useState)([]),t=Object(i.a)(e,2),s=t[0],n=t[1],r=Object(a.useState)({name:"",email:"",image:"",bool:!1,userID:""}),o=Object(i.a)(r,2),d=o[0],O=o[1];return Object(c.jsx)(p.Provider,{value:{user:d,signIn:function(){g.a.auth().signInWithPopup(v).then((function(e){return console.log(e.user),O({name:e.user.displayName,image:e.user.photoURL,email:e.user.email,userID:e.user.uid,bool:!0}),[d.bool,d.image]})).catch((function(e){}))},sendData:function(e){d.bool?g.a.database().ref("users/"+d.userID+"/itemsInCart/"+e.bookID.toString()).set(e):alert("Login to add items to cart")},cartItems:s,getData:function(){(console.log("hello"),d.bool)&&g.a.database().ref("users/"+d.userID+"/itemsInCart").on("value",(function(e){if(e.exists()){var t=e.val();n(Object.values(t))}else n([])}),(function(e){console.log(e)}))},removeData:function(e){d.bool&&g.a.database().ref("users/"+d.userID+"/itemsInCart/").child(e).remove()}},children:Object(c.jsxs)(l.a,{children:[Object(c.jsx)(h,{}),Object(c.jsxs)(b.c,{children:[Object(c.jsx)(b.a,{exact:!0,path:"/",children:Object(c.jsx)(f,{})}),Object(c.jsx)(b.a,{exact:!0,path:"/cart",children:Object(c.jsx)(j,{})}),Object(c.jsx)(b.a,{path:"*",children:Object(c.jsx)(u,{})})]})]})})};o.a.render(Object(c.jsx)(n.a.StrictMode,{children:Object(c.jsx)(k,{})}),document.getElementById("root"))}},[[451,1,2]]]);
//# sourceMappingURL=main.5c5d568c.chunk.js.map